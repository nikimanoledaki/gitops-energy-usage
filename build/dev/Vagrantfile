# -*- mode: ruby -*-
# vi: set ft=ruby :

# For more info, see: ["Create An Ubuntu 20.04 Server Using Vagrant" by Vu Dao](https://dev.to/vumdao/create-an-ubuntu-20-04-server-using-vagrant-3d2i)

Vagrant.configure("2") do |config|
    config.vm.provider "virtualbox" do |vb|
      vb.customize ["modifyvm", :id, '--nested-hw-virt', 'on'] # configures Virtualbox to allow nesting virtualisation layers e.g. VM2 on VM1
    end
    config.vm.provider :libvirt do |libvirt|
        libvirt.driver = "kvm" # add libvirt to be able to later install kvm as the second VM
    end
    config.vm.box = "generic/ubuntu2004" # use a Ubuntu image as the first VM
    config.vm.box_version = "3.1.16"
    config.vm.provision:shell, inline: <<-SHELL
        echo "root:rootroot" | sudo chpasswd
    SHELL

    config.vm.define "ubuntu20.04" do |ubuntu|
        ubuntu.vm.hostname = "ubuntu20.04"
    end
end
